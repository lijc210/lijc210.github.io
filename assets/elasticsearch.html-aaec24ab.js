const e=JSON.parse('{"key":"v-30ed04cb","path":"/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E5%BA%93/elasticsearch.html","title":"elasticsearch","lang":"zh-CN","frontmatter":{"icon":"edit","date":"2022-01-01T00:00:00.000Z","category":["数据库"],"tag":["elasticsearch"],"description":"elasticsearch 查看集群状态，修复 GET _cluster/allocation/explain?pretty GET /_cluster/allocation/explain get /_cluster/settings PUT /_cluster/settings { \\"transient\\": { \\"cluster.routing.allocation.enable\\": \\"none\\" } } #分片配置 PUT /_cluster/settings { \\"transient\\": { \\"cluster.routing.allocation.enable\\": \\"all\\" } } #分片重新均衡分配 PUT /_cluster/settings { \\"transient\\": { \\"cluster.routing.rebalance.enable\\": \\"all\\" } } # 设置副本数量 PUT /aabb/_settings { \\"number_of_replicas\\" : 2 } get _cluster/health?level=indices GET _cat/nodes?v&amp;h=ip,heap.current,heap.percent,heap.max,ram.max,disk.avail,node.role,m curl http://localhost:9200/_cat/nodes?v&amp;h=ip,heap.current,heap.percent,heap.max,ram.max,disk.avail,node.role,m get _cat/master post /_cluster/reroute { \\"commands\\": [ { \\"allocate_empty_primary\\": { \\"index\\": \\"wap_yonghu_v1\\", \\"shard\\": 2, \\"node\\": \\"Ee6ubnnmT52LJchcw0P-pQ\\", \\"accept_data_loss\\": false } } ] } #数据丢失 post /_cluster/reroute { \\"commands\\": [ { \\"allocate_empty_primary\\": { \\"index\\": \\"aabb_v2\\", \\"shard\\": 0, \\"node\\": \\"Ee6ubnnmT52LJchcw0P-pQ\\", \\"accept_data_loss\\": true } } ] } #数据不丢失 post /_cluster/reroute { \\"commands\\" : [ { \\"allocate_stale_primary\\" : { \\"index\\" : \\"aabb_v2\\", \\"shard\\" :0, \\"node\\" : \\"Ee6ubnnmT52LJchcw0P-pQ\\", \\"accept_data_loss\\" : true } }] } POST /_cluster/reroute?retry_failed=true 手动迁移分片 POST /_cluster/reroute { \\"commands\\": [ { \\"move\\": { \\"index\\": \\"aabb_v1\\", \\"shard\\": 1, \\"from_node\\": \\"10.10.20.143\\", \\"to_node\\": \\"10.10.20.153\\" } } ] }","head":[["meta",{"property":"og:url","content":"https://www.cizai.io/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E5%BA%93/elasticsearch.html"}],["meta",{"property":"og:site_name","content":"此在笔记"}],["meta",{"property":"og:title","content":"elasticsearch"}],["meta",{"property":"og:description","content":"elasticsearch 查看集群状态，修复 GET _cluster/allocation/explain?pretty GET /_cluster/allocation/explain get /_cluster/settings PUT /_cluster/settings { \\"transient\\": { \\"cluster.routing.allocation.enable\\": \\"none\\" } } #分片配置 PUT /_cluster/settings { \\"transient\\": { \\"cluster.routing.allocation.enable\\": \\"all\\" } } #分片重新均衡分配 PUT /_cluster/settings { \\"transient\\": { \\"cluster.routing.rebalance.enable\\": \\"all\\" } } # 设置副本数量 PUT /aabb/_settings { \\"number_of_replicas\\" : 2 } get _cluster/health?level=indices GET _cat/nodes?v&amp;h=ip,heap.current,heap.percent,heap.max,ram.max,disk.avail,node.role,m curl http://localhost:9200/_cat/nodes?v&amp;h=ip,heap.current,heap.percent,heap.max,ram.max,disk.avail,node.role,m get _cat/master post /_cluster/reroute { \\"commands\\": [ { \\"allocate_empty_primary\\": { \\"index\\": \\"wap_yonghu_v1\\", \\"shard\\": 2, \\"node\\": \\"Ee6ubnnmT52LJchcw0P-pQ\\", \\"accept_data_loss\\": false } } ] } #数据丢失 post /_cluster/reroute { \\"commands\\": [ { \\"allocate_empty_primary\\": { \\"index\\": \\"aabb_v2\\", \\"shard\\": 0, \\"node\\": \\"Ee6ubnnmT52LJchcw0P-pQ\\", \\"accept_data_loss\\": true } } ] } #数据不丢失 post /_cluster/reroute { \\"commands\\" : [ { \\"allocate_stale_primary\\" : { \\"index\\" : \\"aabb_v2\\", \\"shard\\" :0, \\"node\\" : \\"Ee6ubnnmT52LJchcw0P-pQ\\", \\"accept_data_loss\\" : true } }] } POST /_cluster/reroute?retry_failed=true 手动迁移分片 POST /_cluster/reroute { \\"commands\\": [ { \\"move\\": { \\"index\\": \\"aabb_v1\\", \\"shard\\": 1, \\"from_node\\": \\"10.10.20.143\\", \\"to_node\\": \\"10.10.20.153\\" } } ] }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-13T06:58:32.000Z"}],["meta",{"property":"article:author","content":"cizai"}],["meta",{"property":"article:tag","content":"elasticsearch"}],["meta",{"property":"article:published_time","content":"2022-01-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-13T06:58:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"elasticsearch\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-01T00:00:00.000Z\\",\\"dateModified\\":\\"2023-07-13T06:58:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"cizai\\",\\"url\\":\\"https://www.cizai.io\\"}]}"]]},"headers":[{"level":2,"title":"查看集群状态，修复","slug":"查看集群状态-修复","link":"#查看集群状态-修复","children":[]},{"level":2,"title":"记录慢日志，重启也生效","slug":"记录慢日志-重启也生效","link":"#记录慢日志-重启也生效","children":[]},{"level":2,"title":"记录慢查询日志","slug":"记录慢查询日志","link":"#记录慢查询日志","children":[]},{"level":2,"title":"批量按条件更新","slug":"批量按条件更新","link":"#批量按条件更新","children":[]},{"level":2,"title":"搜索词分权重","slug":"搜索词分权重","link":"#搜索词分权重","children":[]},{"level":2,"title":"统一更改刷新时间","slug":"统一更改刷新时间","link":"#统一更改刷新时间","children":[]},{"level":2,"title":"优化性能","slug":"优化性能","link":"#优化性能","children":[]},{"level":2,"title":"索引复制数据","slug":"索引复制数据","link":"#索引复制数据","children":[]},{"level":2,"title":"暂时移除一个节点","slug":"暂时移除一个节点","link":"#暂时移除一个节点","children":[]},{"level":2,"title":"搜索结果返回不一致问题","slug":"搜索结果返回不一致问题","link":"#搜索结果返回不一致问题","children":[]}],"git":{"createdTime":1689218642000,"updatedTime":1689231512000,"contributors":[{"name":"lijc210","email":"lijc210@163.com","commits":2}]},"readingTime":{"minutes":3.83,"words":1148},"filePathRelative":"大数据/数据库/elasticsearch.md","localizedDate":"2022年1月1日","excerpt":"<h1> elasticsearch</h1>\\n<h2> 查看集群状态，修复</h2>\\n<div class=\\"language-text line-numbers-mode\\" data-ext=\\"text\\"><pre class=\\"language-text\\"><code>GET _cluster/allocation/explain?pretty\\n\\nGET /_cluster/allocation/explain\\n\\nget /_cluster/settings\\n\\nPUT /_cluster/settings\\n{\\n  \\"transient\\": {\\n    \\"cluster.routing.allocation.enable\\": \\"none\\"\\n  }\\n}\\n#分片配置\\n\\nPUT /_cluster/settings\\n{\\n  \\"transient\\": {\\n    \\"cluster.routing.allocation.enable\\": \\"all\\"\\n  }\\n}\\n\\n#分片重新均衡分配\\n\\nPUT /_cluster/settings\\n{\\n  \\"transient\\": {\\n    \\"cluster.routing.rebalance.enable\\": \\"all\\"\\n  }\\n}\\n\\n# 设置副本数量\\nPUT /aabb/_settings\\n{\\n\\"number_of_replicas\\" : 2\\n}\\n\\nget _cluster/health?level=indices\\n\\n\\nGET _cat/nodes?v&amp;h=ip,heap.current,heap.percent,heap.max,ram.max,disk.avail,node.role,m\\n\\ncurl http://localhost:9200/_cat/nodes?v&amp;h=ip,heap.current,heap.percent,heap.max,ram.max,disk.avail,node.role,m\\n\\nget _cat/master\\n\\npost /_cluster/reroute\\n{\\n  \\"commands\\": [\\n    {\\n      \\"allocate_empty_primary\\": {\\n        \\"index\\": \\"wap_yonghu_v1\\",\\n        \\"shard\\": 2,\\n        \\"node\\": \\"Ee6ubnnmT52LJchcw0P-pQ\\",\\n        \\"accept_data_loss\\": false\\n      }\\n    }\\n  ]\\n}\\n\\n\\n#数据丢失\\npost /_cluster/reroute\\n{\\n\\"commands\\": [\\n{\\n\\"allocate_empty_primary\\": {\\n\\"index\\": \\"aabb_v2\\",\\n\\"shard\\": 0,\\n\\"node\\": \\"Ee6ubnnmT52LJchcw0P-pQ\\",\\n\\"accept_data_loss\\": true\\n}\\n}\\n]\\n}\\n\\n#数据不丢失\\npost /_cluster/reroute\\n{\\n\\"commands\\" : [ {\\n\\"allocate_stale_primary\\" : {\\n\\"index\\" : \\"aabb_v2\\",\\n\\"shard\\" :0,\\n\\"node\\" : \\"Ee6ubnnmT52LJchcw0P-pQ\\",\\n\\"accept_data_loss\\" : true\\n}\\n}]\\n}\\n\\n\\nPOST /_cluster/reroute?retry_failed=true\\n\\n\\n手动迁移分片\\nPOST /_cluster/reroute\\n{\\n  \\"commands\\": [\\n    {\\n      \\"move\\": {\\n        \\"index\\": \\"aabb_v1\\",\\n        \\"shard\\": 1,\\n        \\"from_node\\": \\"10.10.20.143\\",\\n        \\"to_node\\": \\"10.10.20.153\\"\\n      }\\n    }\\n  ]\\n}\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{e as data};
