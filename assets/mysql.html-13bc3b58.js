import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as i,e as l}from"./app-fccbd3eb.js";const s={},n=l(`<h1 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> mysql</h1><h2 id="查看和修改-mysql-的最大连接数" tabindex="-1"><a class="header-anchor" href="#查看和修改-mysql-的最大连接数" aria-hidden="true">#</a> 查看和修改 MySQL 的最大连接数</h2><p>默认是100</p><p>查看方法</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>show variables like &#39;%max_connections%&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改有两种方法:<br> 1.修改my.cnf里的max_connections例如:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>max_connections=500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.进入到mysql后执行:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>set GLOBAL max_connections=500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="清除mysql-bin与减少ibdata的方法" tabindex="-1"><a class="header-anchor" href="#清除mysql-bin与减少ibdata的方法" aria-hidden="true">#</a> 清除mysql-bin与减少ibdata的方法</h2><p>进入myqsl命令行，执行下面命令清除mysql-bin.000050以前的bin日志<br> purge master logs to &#39;mysql-bin.000050&#39;;</p><p>减少ibdata的方法如下</p><ul><li><ol><li>用mysqldump等工具导出数据</li></ol></li><li><ol start="2"><li>停止 mysqld</li></ol></li><li><ol start="3"><li>删除ibdata*, ib_logfile* 文件</li></ol></li><li><ol start="4"><li>重新启动 mysqld（这时mysqld就会自动创建 idbdata*, ib_logfile* 文件）</li></ol></li><li><ol start="5"><li>将到出来的数据导回去，体积才会减小。</li></ol></li></ul><h2 id="mysql-查看表大小" tabindex="-1"><a class="header-anchor" href="#mysql-查看表大小" aria-hidden="true">#</a> mysql 查看表大小</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>SELECT TABLE_NAME,DATA_LENGTH,INDEX_LENGTH,(DATA_LENGTH+INDEX_LENGTH) as length,TABLE_ROWS,
concat(round((DATA_LENGTH+INDEX_LENGTH)/1024/1024,3), &#39;MB&#39;) as
total_size FROM information_schema.TABLES order by length desc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql按比例缩小" tabindex="-1"><a class="header-anchor" href="#mysql按比例缩小" aria-hidden="true">#</a> mysql按比例缩小</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>SELECT ceil(LOG(SQRT(2),50000)*10) -- 313
SELECT ceil(LOG(SQRT(2),5000)*10) -- 246
SELECT ceil(LOG(SQRT(2),500)*10) -- 180
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),d=[n];function t(r,c){return a(),i("div",null,d)}const u=e(s,[["render",t],["__file","mysql.html.vue"]]);export{u as default};
