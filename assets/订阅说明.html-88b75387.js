const n=JSON.parse('{"key":"v-0735c741","path":"/%E6%AF%8F%E6%97%A5%E6%82%A6%E8%AF%BB/%E8%AE%A2%E9%98%85%E8%AF%B4%E6%98%8E.html","title":"订阅说明","lang":"zh-CN","frontmatter":{"order":-1,"icon":"read","date":"2023-06-15T00:00:00.000Z","category":["每日悦读"],"description":"订阅说明 实现原理 使用ttrss.py启动订阅服务接口，使用rsshub订阅插件，将Tiny Tiny RSS地址改为订阅接口地址，即可直接订阅网站，存入rss.csv。 定时执行write2csv.py，抓取网络上的订阅地址，存入rss.csv。 定时执行write2md.py，读取rss.csv，获取今日新增文章，写入md文档，提交git，自动显示在每日悦读。 参考代码： ttrss.py # coding: utf-8 \\"\\"\\" @File : main.py @Time : 2023/05/05 18:46:35 @Author : lijc210@163.com @Desc : 模拟rsshub订阅插件，将Tiny Tiny RSS订阅到此地址 依赖模块 pip install fastapi,feedparser,uvicorn,requests 订阅请求地址 http://localhost:8000/public.php?op=bookmarklets--subscribe&amp;feed_url=https://rustcc.cn/rss \\"\\"\\" import time import traceback import uvicorn from datetime import datetime, timedelta from typing import Union from fastapi import FastAPI from write2csv import write2csv app = FastAPI() order: str = time.strftime(\\"%Y%m%d\\", time.localtime(time.time())) date: str = time.strftime(\\"%Y-%m-%d\\", time.localtime(time.time())) tomorrow = (datetime.now() + timedelta(days=1)).strftime(\\"%Y-%m-%d\\") @app.get(\\"/\\") def read_root(): return {\\"Hello\\": \\"World\\"} @app.get(\\"/items/{item_id}\\") def read_item(item_id: int, q: Union[str, None] = None): return {\\"item_id\\": item_id, \\"q\\": q} @app.get(\\"/public.php\\") def public(op: str, feed_url: str): try: # print(op) # print(feed_url) success, msg = write2csv(feed_url) except Exception: print(traceback.format_exc()) success, msg = False, traceback.format_exc() return {\\"success\\": success, \\"msg\\": msg} if __name__ == \\"__main__\\": uvicorn.run(app=\\"ttrss:app\\", host=\\"0.0.0.0\\", port=8000, reload=True)","head":[["meta",{"property":"og:url","content":"https://www.cizai.io/%E6%AF%8F%E6%97%A5%E6%82%A6%E8%AF%BB/%E8%AE%A2%E9%98%85%E8%AF%B4%E6%98%8E.html"}],["meta",{"property":"og:site_name","content":"此在笔记"}],["meta",{"property":"og:title","content":"订阅说明"}],["meta",{"property":"og:description","content":"订阅说明 实现原理 使用ttrss.py启动订阅服务接口，使用rsshub订阅插件，将Tiny Tiny RSS地址改为订阅接口地址，即可直接订阅网站，存入rss.csv。 定时执行write2csv.py，抓取网络上的订阅地址，存入rss.csv。 定时执行write2md.py，读取rss.csv，获取今日新增文章，写入md文档，提交git，自动显示在每日悦读。 参考代码： ttrss.py # coding: utf-8 \\"\\"\\" @File : main.py @Time : 2023/05/05 18:46:35 @Author : lijc210@163.com @Desc : 模拟rsshub订阅插件，将Tiny Tiny RSS订阅到此地址 依赖模块 pip install fastapi,feedparser,uvicorn,requests 订阅请求地址 http://localhost:8000/public.php?op=bookmarklets--subscribe&amp;feed_url=https://rustcc.cn/rss \\"\\"\\" import time import traceback import uvicorn from datetime import datetime, timedelta from typing import Union from fastapi import FastAPI from write2csv import write2csv app = FastAPI() order: str = time.strftime(\\"%Y%m%d\\", time.localtime(time.time())) date: str = time.strftime(\\"%Y-%m-%d\\", time.localtime(time.time())) tomorrow = (datetime.now() + timedelta(days=1)).strftime(\\"%Y-%m-%d\\") @app.get(\\"/\\") def read_root(): return {\\"Hello\\": \\"World\\"} @app.get(\\"/items/{item_id}\\") def read_item(item_id: int, q: Union[str, None] = None): return {\\"item_id\\": item_id, \\"q\\": q} @app.get(\\"/public.php\\") def public(op: str, feed_url: str): try: # print(op) # print(feed_url) success, msg = write2csv(feed_url) except Exception: print(traceback.format_exc()) success, msg = False, traceback.format_exc() return {\\"success\\": success, \\"msg\\": msg} if __name__ == \\"__main__\\": uvicorn.run(app=\\"ttrss:app\\", host=\\"0.0.0.0\\", port=8000, reload=True)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-13T10:52:36.000Z"}],["meta",{"property":"article:author","content":"cizai"}],["meta",{"property":"article:published_time","content":"2023-06-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-13T10:52:36.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"订阅说明\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-06-15T00:00:00.000Z\\",\\"dateModified\\":\\"2023-07-13T10:52:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"cizai\\",\\"url\\":\\"https://www.cizai.io\\"}]}"]]},"headers":[{"level":2,"title":"实现原理","slug":"实现原理","link":"#实现原理","children":[]},{"level":2,"title":"ttrss.py","slug":"ttrss-py","link":"#ttrss-py","children":[]},{"level":2,"title":"write2md.py","slug":"write2md-py","link":"#write2md-py","children":[]},{"level":2,"title":"write2csv.py","slug":"write2csv-py","link":"#write2csv-py","children":[]},{"level":2,"title":"utils.py","slug":"utils-py","link":"#utils-py","children":[]}],"git":{"createdTime":1689218642000,"updatedTime":1689245556000,"contributors":[{"name":"lijc210","email":"lijc210@163.com","commits":2}]},"readingTime":{"minutes":6.78,"words":2034},"filePathRelative":"每日悦读/订阅说明.md","localizedDate":"2023年6月15日","excerpt":"<h1> 订阅说明</h1>\\n<h2> 实现原理</h2>\\n<p>使用ttrss.py启动订阅服务接口，使用rsshub订阅插件，将Tiny Tiny RSS地址改为订阅接口地址，即可直接订阅网站，存入rss.csv。</p>\\n<p>定时执行write2csv.py<span></span>，抓取网络上的订阅地址，存入rss.csv。</p>\\n<p>定时执行write2md.py<span></span>，读取rss.csv，获取今日新增文章，写入md文档，提交git，自动显示在每日悦读。</p>\\n<p>参考代码：</p>\\n<h2> ttrss.py<span></span></h2>\\n<div class=\\"language-python line-numbers-mode\\" data-ext=\\"py\\"><pre class=\\"language-python\\"><code><span class=\\"token comment\\"># coding: utf-8</span>\\n<span class=\\"token triple-quoted-string string\\">\\"\\"\\"\\n@File    :   main.py\\n@Time    :   2023/05/05 18:46:35\\n@Author  :   lijc210@163.com\\n@Desc    :   模拟rsshub订阅插件，将Tiny Tiny RSS订阅到此地址\\n依赖模块 pip install fastapi,feedparser,uvicorn,requests\\n订阅请求地址 http://localhost:8000/public.php?op=bookmarklets--subscribe&amp;feed_url=https://rustcc.cn/rss\\n\\"\\"\\"</span>\\n<span class=\\"token keyword\\">import</span> time\\n<span class=\\"token keyword\\">import</span> traceback\\n<span class=\\"token keyword\\">import</span> uvicorn\\n<span class=\\"token keyword\\">from</span> datetime <span class=\\"token keyword\\">import</span> datetime<span class=\\"token punctuation\\">,</span> timedelta\\n<span class=\\"token keyword\\">from</span> typing <span class=\\"token keyword\\">import</span> Union\\n<span class=\\"token keyword\\">from</span> fastapi <span class=\\"token keyword\\">import</span> FastAPI\\n<span class=\\"token keyword\\">from</span> write2csv <span class=\\"token keyword\\">import</span> write2csv\\n\\napp <span class=\\"token operator\\">=</span> FastAPI<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\norder<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">str</span> <span class=\\"token operator\\">=</span> time<span class=\\"token punctuation\\">.</span>strftime<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"%Y%m%d\\"</span><span class=\\"token punctuation\\">,</span> time<span class=\\"token punctuation\\">.</span>localtime<span class=\\"token punctuation\\">(</span>time<span class=\\"token punctuation\\">.</span>time<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\ndate<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">str</span> <span class=\\"token operator\\">=</span> time<span class=\\"token punctuation\\">.</span>strftime<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"%Y-%m-%d\\"</span><span class=\\"token punctuation\\">,</span> time<span class=\\"token punctuation\\">.</span>localtime<span class=\\"token punctuation\\">(</span>time<span class=\\"token punctuation\\">.</span>time<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\ntomorrow <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span>datetime<span class=\\"token punctuation\\">.</span>now<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">+</span> timedelta<span class=\\"token punctuation\\">(</span>days<span class=\\"token operator\\">=</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>strftime<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"%Y-%m-%d\\"</span><span class=\\"token punctuation\\">)</span>\\n\\n\\n<span class=\\"token decorator annotation punctuation\\">@app<span class=\\"token punctuation\\">.</span>get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">read_root</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span><span class=\\"token string\\">\\"Hello\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"World\\"</span><span class=\\"token punctuation\\">}</span>\\n\\n\\n<span class=\\"token decorator annotation punctuation\\">@app<span class=\\"token punctuation\\">.</span>get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/items/{item_id}\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">read_item</span><span class=\\"token punctuation\\">(</span>item_id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">,</span> q<span class=\\"token punctuation\\">:</span> Union<span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">str</span><span class=\\"token punctuation\\">,</span> <span class=\\"token boolean\\">None</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">None</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span><span class=\\"token string\\">\\"item_id\\"</span><span class=\\"token punctuation\\">:</span> item_id<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"q\\"</span><span class=\\"token punctuation\\">:</span> q<span class=\\"token punctuation\\">}</span>\\n\\n\\n<span class=\\"token decorator annotation punctuation\\">@app<span class=\\"token punctuation\\">.</span>get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/public.php\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">public</span><span class=\\"token punctuation\\">(</span>op<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">str</span><span class=\\"token punctuation\\">,</span> feed_url<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">str</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">try</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token comment\\"># print(op)</span>\\n        <span class=\\"token comment\\"># print(feed_url)</span>\\n        success<span class=\\"token punctuation\\">,</span> msg <span class=\\"token operator\\">=</span> write2csv<span class=\\"token punctuation\\">(</span>feed_url<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">except</span> Exception<span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span>traceback<span class=\\"token punctuation\\">.</span>format_exc<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n        success<span class=\\"token punctuation\\">,</span> msg <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">False</span><span class=\\"token punctuation\\">,</span> traceback<span class=\\"token punctuation\\">.</span>format_exc<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span><span class=\\"token string\\">\\"success\\"</span><span class=\\"token punctuation\\">:</span> success<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"msg\\"</span><span class=\\"token punctuation\\">:</span> msg<span class=\\"token punctuation\\">}</span>\\n\\n\\n<span class=\\"token keyword\\">if</span> __name__ <span class=\\"token operator\\">==</span> <span class=\\"token string\\">\\"__main__\\"</span><span class=\\"token punctuation\\">:</span>\\n    uvicorn<span class=\\"token punctuation\\">.</span>run<span class=\\"token punctuation\\">(</span>app<span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"ttrss:app\\"</span><span class=\\"token punctuation\\">,</span> host<span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"0.0.0.0\\"</span><span class=\\"token punctuation\\">,</span> port<span class=\\"token operator\\">=</span><span class=\\"token number\\">8000</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">reload</span><span class=\\"token operator\\">=</span><span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">)</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{n as data};
