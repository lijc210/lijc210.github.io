import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as s,d as a}from"./app-BtYvV6kH.js";const n={},l=a(`<h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>docker</span></a></h1><h2 id="orbstack设置国内镜像加速" tabindex="-1"><a class="header-anchor" href="#orbstack设置国内镜像加速"><span>orbstack设置国内镜像加速</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;registry-mirrors&quot;: [</span></span>
<span class="line"><span>        &quot;http://hub-mirror.c.163.com&quot;,</span></span>
<span class="line"><span>        &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span></span>
<span class="line"><span>        &quot;https://registry.docker-cn.com&quot;,</span></span>
<span class="line"><span>        &quot;https://registry.hub.docker.com&quot;</span></span>
<span class="line"><span>    ]</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="portainer-重置密码" tabindex="-1"><a class="header-anchor" href="#portainer-重置密码"><span>portainer 重置密码</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker stop portainer</span></span>
<span class="line"><span>docker run --rm -v /data/docker_data/portainer_data:/data portainer/helper-reset-password</span></span>
<span class="line"><span>docker start portainer</span></span>
<span class="line"><span></span></span>
<span class="line"><span>其中/data/docker_data/portainer_data为本地挂载路径，执行完后会输出用户名和密码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-安装与启动" tabindex="-1"><a class="header-anchor" href="#docker-安装与启动"><span>docker 安装与启动</span></a></h2><p>Windows WSL2</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl -fsSL https://get.docker.com -o get-docker.sh</span></span>
<span class="line"><span>sudo sh get-docker.sh</span></span>
<span class="line"><span>sudo service docker start</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>macbook</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>brew install --cask docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="docker常用命令" tabindex="-1"><a class="header-anchor" href="#docker常用命令"><span>docker常用命令</span></a></h2><p>先上图：</p><figure><img src="https://ask.qcloudimg.com/http-save/yehe-7565276/6lldlbgfhn.png?imageView2/2/w/1200" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="dcoker基本概念" tabindex="-1"><a class="header-anchor" href="#dcoker基本概念"><span>Dcoker基本概念</span></a></h2><p><a href="https://cloud.tencent.com/product/tke?from=20065&amp;from_column=20065" target="_blank" rel="noopener noreferrer">Docker</a> 包括三个基本概念：</p><ul><li>镜像（<code>Image</code>）：Docker 镜像是一个特殊的文件系统，除了提供<a href="https://cloud.tencent.com/product/tke?from=20065&amp;from_column=20065" target="_blank" rel="noopener noreferrer">容器</a>运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。</li><li>容器（<code>Container</code>）：镜像（<code>Image</code>）和容器（<code>Container</code>）的关系，就像是面向对象程序设计中的 <code>类</code> 和 <code>实例</code> 一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</li><li>仓库（<code>Repository</code>）：仓库（<code>Repository</code>）类似Git的远程仓库，集中存放镜像文件。</li></ul><p>三者关系可以用下图表示：</p><figure><img src="https://ask.qcloudimg.com/http-save/yehe-7565276/joa65awgh4.png?imageView2/2/w/1200" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>接下来看一看Docker的常用命令。</p><h2 id="服务" tabindex="-1"><a class="header-anchor" href="#服务"><span>服务</span></a></h2><ul><li>查看Docker版本信息</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查看docker简要信息</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker -v</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>启动Docker</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl start docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>关闭docker</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl stop docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>设置开机启动</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl enable docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>重启docker服务</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>service docker restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>关闭docker服务</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>service docker stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="镜像" tabindex="-1"><a class="header-anchor" href="#镜像"><span>镜像</span></a></h2><h2 id="镜像仓库" tabindex="-1"><a class="header-anchor" href="#镜像仓库"><span>镜像仓库</span></a></h2><p><a href="https://hub.docker.com/search?q=&amp;type=image" target="_blank" rel="noopener noreferrer">Docker Hub</a> 等<a href="https://cloud.tencent.com/product/tcr?from=20065&amp;from_column=20065" target="_blank" rel="noopener noreferrer">镜像仓库</a>上有大量的高质量的镜像可以用，可以从仓库获取镜像。</p><ul><li>检索镜像</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker search 关键字</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>检索指定镜像tag</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt-get install jq</span></span>
<span class="line"><span>curl -s https://registry.hub.docker.com/v2/repositories/library/ubuntu/tags/ | jq &#39;.&quot;results&quot;[][&quot;name&quot;]&#39;</span></span>
<span class="line"><span>curl -s https://registry.hub.docker.com/v2/repositories/amancevice/superset/tags/ | jq &#39;.&quot;results&quot;[][&quot;name&quot;]&#39;</span></span>
<span class="line"><span>curl -s https://registry.hub.docker.com/v2/repositories/apache/superset/tags/ | jq &#39;.&quot;results&quot;[][&quot;name&quot;]&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>拉取镜像</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker pull [选项] [Docker Registry 地址[:端口号]/]仓库名[:标签]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="镜像管理" tabindex="-1"><a class="header-anchor" href="#镜像管理"><span>镜像管理</span></a></h2><ul><li>列出镜像</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker image ls</span></span>
<span class="line"><span>docker images</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>删除镜像</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 删除指定镜像</span></span>
<span class="line"><span>docker rmi &lt;镜像Id&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>导出镜像</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 将镜像保存为归档文件</span></span>
<span class="line"><span>docker save</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>导入镜像</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker load</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="dockerfile构建镜像" tabindex="-1"><a class="header-anchor" href="#dockerfile构建镜像"><span>Dockerfile构建镜像</span></a></h2><p>Dockerfile 是一个文本格式的配 文件，用户可以使用 Dockerfile 来快速创建自定义的镜像。</p><p>Dockerfile 由一行行行命令语句组成，并且支持以＃开头的注释行.</p><h3 id="dockerfile常见指令" tabindex="-1"><a class="header-anchor" href="#dockerfile常见指令"><span>Dockerfile常见指令</span></a></h3><p>下面是Dockerfile中一些常见的指令：</p><ul><li>FROM：指定基础镜像</li><li>RUN：执行命令</li><li>COPY：复制文件</li><li>ADD：更高级的复制文件</li><li>CMD：容器启动命令</li><li>ENV：设置环境变量</li><li>EXPOSE：暴露端口</li></ul><p>其它的指令还有ENTRYPOINT、ARG、VOLUME、WORKDIR、USER、HEALTHCHECK、ONBUILD、LABEL等等。</p><p>以下是一个Dockerfile实例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>FROM java:8</span></span>
<span class="line"><span>MAINTAINER &quot;jinshw&quot;&lt;jinshw@qq.com&gt;</span></span>
<span class="line"><span>ADD mapcharts-0.0.1-SNAPSHOT.jar mapcharts.jar</span></span>
<span class="line"><span>EXPOSE 8080</span></span>
<span class="line"><span>CMD java -jar mapcharts.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="镜像构建" tabindex="-1"><a class="header-anchor" href="#镜像构建"><span>镜像构建</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker build</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="镜像运行" tabindex="-1"><a class="header-anchor" href="#镜像运行"><span>镜像运行</span></a></h3><p>镜像运行，就是新建并运行一个容器。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker run [镜像ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="容器" tabindex="-1"><a class="header-anchor" href="#容器"><span>容器</span></a></h2><h2 id="容器生命周期" tabindex="-1"><a class="header-anchor" href="#容器生命周期"><span>容器生命周期</span></a></h2><ul><li>启动：启动容器有两种方式，一种是基于镜像新建一个容器并启动，另外一个是将在终止状态（stopped）的容器重新启动。</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 新建并启动</span></span>
<span class="line"><span>docker run [镜像名/镜像ID]</span></span>
<span class="line"><span># 启动已终止容器</span></span>
<span class="line"><span>docker start [容器ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看容器</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 列出本机运行的容器</span></span>
<span class="line"><span>$ docker ps </span></span>
<span class="line"><span># 列出本机所有的容器（包括停止和运行）</span></span>
<span class="line"><span>$ docker ps -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>停止容器</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 停止运行的容器</span></span>
<span class="line"><span>docker stop [容器ID]</span></span>
<span class="line"><span># 杀死容器进程</span></span>
<span class="line"><span>docker  kill [容器ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>重启容器</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker restart [容器ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>删除容器</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker  rm [容器ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="进入容器" tabindex="-1"><a class="header-anchor" href="#进入容器"><span>进入容器</span></a></h2><p>进入容器有两种方式：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 如果从这个 stdin 中 exit，会导致容器的停止</span></span>
<span class="line"><span>docker attach [容器ID]</span></span>
<span class="line"><span># 交互式进入容器</span></span>
<span class="line"><span>docker exec [容器ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>进入容器通常使用第二种方式，<code>docker exec</code>后面跟的常见参数如下：</p><ul><li>-d, --detach 在容器中后台执行命令；</li><li>-i, --interactive=true I false ：打开标准输入接受用户输入命令</li></ul><h2 id="导出和导入" tabindex="-1"><a class="header-anchor" href="#导出和导入"><span>导出和导入</span></a></h2><ul><li>导出容器</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>#导出一个已经创建的容器到一个文件</span></span>
<span class="line"><span>docker export [容器ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>导入容器</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 导出的容器快照文件可以再导入为镜像</span></span>
<span class="line"><span>docker import [路径]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="其它" tabindex="-1"><a class="header-anchor" href="#其它"><span>其它</span></a></h2><ul><li>查看日志</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 导出的容器快照文件可以再导入为镜像</span></span>
<span class="line"><span>docker logs [容器ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>这个命令有以下常用参数 -f : 跟踪日志输出</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>--since :显示某个开始时间的所有日志</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-t : 显示时间戳</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--tail :仅列出最新N条容器日志</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>复制文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 从主机复制到容器</span></span>
<span class="line"><span>sudo docker cp host_path containerID:container_path </span></span>
<span class="line"><span># 从容器复制到主机</span></span>
<span class="line"><span>sudo docker cp containerID:container_path host_path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参考：</strong></p><p>【1】：<a href="https://cloud.tencent.com/developer/article/1772136" target="_blank" rel="noopener noreferrer">一张脑图整理Docker常用命令 </a></p><h2 id="build技巧" tabindex="-1"><a class="header-anchor" href="#build技巧"><span>build技巧</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>guoquan-apocalypse-app项目使用alpine  镜像804.3 MB </span></span>
<span class="line"><span>加上--virtual .build-deps    RUN apk del .build-deps  加上后没有变化</span></span>
<span class="line"><span></span></span>
<span class="line"><span>guoquan-apocalypse-app项目使用slim</span></span>
<span class="line"><span>安装gcc libpq-dev（psycopg2） 镜像604.3MB</span></span>
<span class="line"><span>加上--no-install-recommends和rm -rf /var/lib/apt/lists/*  镜像574 MB</span></span>
<span class="line"><span></span></span>
<span class="line"><span>使用dockerignore排除.venv文件</span></span>
<span class="line"><span></span></span>
<span class="line"><span>所以alpine镜像安装一堆依赖后，可能比slim镜像大，所以在需要安装很多依赖的时候，推荐使用slim镜像</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,99),r=[l];function t(d,c){return s(),i("div",null,r)}const o=e(n,[["render",t],["__file","docker.html.vue"]]),k=JSON.parse('{"path":"/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/docker.html","title":"docker","lang":"zh-CN","frontmatter":{"icon":"edit","date":"2022-01-01T00:00:00.000Z","category":["工具"],"tag":["docker"],"description":"docker orbstack设置国内镜像加速 portainer 重置密码 docker 安装与启动 Windows WSL2 macbook docker常用命令 先上图： Dcoker基本概念 Docker 包括三个基本概念： 镜像（Image）：Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含...","head":[["meta",{"property":"og:url","content":"https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/docker.html"}],["meta",{"property":"og:site_name","content":"此在笔记"}],["meta",{"property":"og:title","content":"docker"}],["meta",{"property":"og:description","content":"docker orbstack设置国内镜像加速 portainer 重置密码 docker 安装与启动 Windows WSL2 macbook docker常用命令 先上图： Dcoker基本概念 Docker 包括三个基本概念： 镜像（Image）：Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://ask.qcloudimg.com/http-save/yehe-7565276/6lldlbgfhn.png?imageView2/2/w/1200"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-05T15:57:20.000Z"}],["meta",{"property":"article:author","content":"cizai"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:published_time","content":"2022-01-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-05T15:57:20.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"docker\\",\\"image\\":[\\"https://ask.qcloudimg.com/http-save/yehe-7565276/6lldlbgfhn.png?imageView2/2/w/1200\\",\\"https://ask.qcloudimg.com/http-save/yehe-7565276/joa65awgh4.png?imageView2/2/w/1200\\"],\\"datePublished\\":\\"2022-01-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-06-05T15:57:20.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"cizai\\",\\"url\\":\\"https://blog.cizai.io\\"}]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://blog.cizai.io/atom.xml","title":"此在笔记 Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://blog.cizai.io/feed.json","title":"此在笔记 JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://blog.cizai.io/rss.xml","title":"此在笔记 RSS Feed"}]]},"headers":[{"level":2,"title":"orbstack设置国内镜像加速","slug":"orbstack设置国内镜像加速","link":"#orbstack设置国内镜像加速","children":[]},{"level":2,"title":"portainer 重置密码","slug":"portainer-重置密码","link":"#portainer-重置密码","children":[]},{"level":2,"title":"docker 安装与启动","slug":"docker-安装与启动","link":"#docker-安装与启动","children":[]},{"level":2,"title":"docker常用命令","slug":"docker常用命令","link":"#docker常用命令","children":[]},{"level":2,"title":"Dcoker基本概念","slug":"dcoker基本概念","link":"#dcoker基本概念","children":[]},{"level":2,"title":"服务","slug":"服务","link":"#服务","children":[]},{"level":2,"title":"镜像","slug":"镜像","link":"#镜像","children":[]},{"level":2,"title":"镜像仓库","slug":"镜像仓库","link":"#镜像仓库","children":[]},{"level":2,"title":"镜像管理","slug":"镜像管理","link":"#镜像管理","children":[]},{"level":2,"title":"Dockerfile构建镜像","slug":"dockerfile构建镜像","link":"#dockerfile构建镜像","children":[{"level":3,"title":"Dockerfile常见指令","slug":"dockerfile常见指令","link":"#dockerfile常见指令","children":[]},{"level":3,"title":"镜像构建","slug":"镜像构建","link":"#镜像构建","children":[]},{"level":3,"title":"镜像运行","slug":"镜像运行","link":"#镜像运行","children":[]}]},{"level":2,"title":"容器","slug":"容器","link":"#容器","children":[]},{"level":2,"title":"容器生命周期","slug":"容器生命周期","link":"#容器生命周期","children":[]},{"level":2,"title":"进入容器","slug":"进入容器","link":"#进入容器","children":[]},{"level":2,"title":"导出和导入","slug":"导出和导入","link":"#导出和导入","children":[]},{"level":2,"title":"其它","slug":"其它","link":"#其它","children":[]},{"level":2,"title":"build技巧","slug":"build技巧","link":"#build技巧","children":[]}],"git":{"createdTime":1710697545000,"updatedTime":1717603040000,"contributors":[{"name":"sampan","email":"lijc210@163.com","commits":3}]},"readingTime":{"minutes":4.4,"words":1319},"filePathRelative":"编程/工具/docker.md","localizedDate":"2022年1月1日","excerpt":"\\n<h2>orbstack设置国内镜像加速</h2>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>{</span></span>\\n<span class=\\"line\\"><span>    \\"registry-mirrors\\": [</span></span>\\n<span class=\\"line\\"><span>        \\"http://hub-mirror.c.163.com\\",</span></span>\\n<span class=\\"line\\"><span>        \\"https://docker.mirrors.ustc.edu.cn\\",</span></span>\\n<span class=\\"line\\"><span>        \\"https://registry.docker-cn.com\\",</span></span>\\n<span class=\\"line\\"><span>        \\"https://registry.hub.docker.com\\"</span></span>\\n<span class=\\"line\\"><span>    ]</span></span>\\n<span class=\\"line\\"><span>}</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{o as comp,k as data};
