<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://blog.cizai.io/rss.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://blog.cizai.io/rss.xml" rel="self" type="application/rss+xml"/>
    <title>此在笔记</title>
    <link>https://blog.cizai.io/</link>
    <description>开源工具、效率方法、心理学探索的自我提升笔记 ，记录并输出一切能让自己提升的知识。</description>
    <language>zh-CN</language>
    <pubDate>Thu, 27 Jun 2024 03:11:26 GMT</pubDate>
    <lastBuildDate>Thu, 27 Jun 2024 03:11:26 GMT</lastBuildDate>
    <generator>@vuepress/plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <category>工具</category>
    <category>站点收藏</category>
    <category>每日悦读</category>
    <category>数据库</category>
    <item>
      <title>wireguard</title>
      <link>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/wireguard.html</link>
      <guid>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/wireguard.html</guid>
      <source url="https://blog.cizai.io/rss.xml">wireguard</source>
      <description>wireguard 安装 wireguard 一键安装脚本 https://github.com/angristan/wireguard-install 再次运行可以添加更多用户 配合v2ray使用 https://www.40huo.cn/blog/wireguard-over-vless.html https://github.com/XTLS/X...</description>
      <category>工具</category>
      <pubDate>Wed, 26 Jun 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>安装</h2>
<p>wireguard 一键安装脚本
https://github.com/angristan/wireguard-install</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl -O https://raw.githubusercontent.com/angristan/wireguard-install/master/wireguard-install.sh</span></span>
<span class="line"><span>chmod +x wireguard-install.sh</span></span>
<span class="line"><span>./wireguard-install.sh</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再次运行可以添加更多用户</p>
<h2>配合v2ray使用</h2>
<p>https://www.40huo.cn/blog/wireguard-over-vless.html</p>
<p>https://github.com/XTLS/Xray-core/issues/1896</p>
]]></content:encoded>
    </item>
    <item>
      <title>流量捕获</title>
      <link>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/%E6%B5%81%E9%87%8F%E6%8D%95%E8%8E%B7.html</link>
      <guid>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/%E6%B5%81%E9%87%8F%E6%8D%95%E8%8E%B7.html</guid>
      <source url="https://blog.cizai.io/rss.xml">流量捕获</source>
      <description>流量捕获 mitmproxy</description>
      <category>工具</category>
      <pubDate>Tue, 11 Jun 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>mitmproxy</h2>
]]></content:encoded>
    </item>
    <item>
      <title>反向代理应用frp</title>
      <link>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/frp.html</link>
      <guid>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/frp.html</guid>
      <source url="https://blog.cizai.io/rss.xml">反向代理应用frp</source>
      <description>反向代理应用frp 拥有公网IP的情况下，可以使用frp来实现内网机器的端口映射和访问。 安装 linux mac 通过tcp访问内网机器端口 通过自定义域名访问内网的 Web 服务 代理上网 （无法打开被强的网站）</description>
      <category>工具</category>
      <pubDate>Tue, 02 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>拥有公网IP的情况下，可以使用frp来实现内网机器的端口映射和访问。</p>
<h2>安装</h2>
<p>linux</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>wget https://github.com/fatedier/frp/releases/download/v0.57.0/frp_0.57.0_linux_amd64.tar.gz</span></span>
<span class="line"><span>tar -zxvf frp_0.57.0_linux_amd64.tar.gz</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>mac</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>wget https://github.com/fatedier/frp/releases/download/v0.57.0/frp_0.57.0_darwin_arm64.tar.gz</span></span>
<span class="line"><span>tar -zxvf frp_0.57.0_darwin_arm64.tar.gz</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2>通过tcp访问内网机器端口</h2>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">公网服务器上编辑frps.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">bindPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">内网服务器上编辑frpc.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">serverAddr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "x.x.x.x"</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 公网服务器的 IP 地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">serverPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">[[proxies]]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "ssh"</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "tcp"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">localIP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "127.0.0.1"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">localPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 22</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">remotePort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 2222</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">[[proxies]]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "web"</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "tcp"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">localIP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "127.0.0.1"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">localPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 5500</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">remotePort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 5555</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"># localIP 和 localPort 配置为需要从公网访问的内网服务的地址和端口。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"># remotePort 表示在 frp 服务端监听的端口，访问此端口的流量将被转发到本地服务的相应端口。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">启动</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frps</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 和</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">./frps</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frps.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">./frpc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frpc.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">使用以下命令通过</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> SSH</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 访问内网机器，假设用户名为</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> test：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> Port=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66">2222</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> test@x.x.x.x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">使用以下命令通过</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> Web</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 服务访问内网机器，假设服务运行在</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 5555</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 端口：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> http://x.x.x.x:5555</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>通过自定义域名访问内网的 Web 服务</h2>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">公网服务器上编辑frps.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">bindPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">内网服务器上编辑frpc.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">serverAddr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "x.x.x.x"</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 公网服务器的 IP 地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">serverPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">[[proxies]]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "web"</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "http"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">localIP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "127.0.0.1"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">localPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 80</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">customDomains</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">"www.yourdomain.com"</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">启动</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frps</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 和</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">./frps</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frps.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">./frpc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frpc.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">将</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> www.yourdomain.com的域名</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> A</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 记录解析到服务器的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> IP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 地址</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> x.x.x.x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">访问</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> http://www.yourdomain.com</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 即可访问内网的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> Web</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 服务</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>代理上网 （无法打开被强的网站）</h2>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">公网服务器上编辑frps.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">bindPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">内网服务器上编辑frpc.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">serverAddr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "x.x.x.x"</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"> # 公网服务器的 IP 地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">server_port</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 7000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">[[proxies]]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "plugin_http_proxy"</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "tcp"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">remotePort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 6004</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">[proxies.plugin]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "http_proxy"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">httpUser</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "abc"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">httpPassword</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "abc"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">[[proxies]]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "plugin_socks5"</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "tcp"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">remotePort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 6005</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">[proxies.plugin]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "socks5"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">username</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "abc"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">password</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> "abc"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">启动</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frps</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 和</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">./frps</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frps.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">./frpc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> frpc.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"># 设置代理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75"> http_proxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">://</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">abc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">abc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">6004</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75"> https_proxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">$http_proxy</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75"> all_proxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">socks5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">://</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">abc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">abc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75">6005</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75"> no_proxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">"localhost,127.0.0.1,x.x.x.x"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> https://www.baidu.com</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 可以代理访问</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> https://www.google.com</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 无法打开被强的网站，因为没有伪装加密</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>内网穿透</title>
      <link>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html</link>
      <guid>https://blog.cizai.io/%E7%BC%96%E7%A8%8B/%E5%B7%A5%E5%85%B7/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html</guid>
      <source url="https://blog.cizai.io/rss.xml">内网穿透</source>
      <description>内网穿透 serveo ssh -R 80:localhost:3000 serveo.net ngrok 启动时需要验证 ngrok http 3000 localtunnel 访问时需要验证 cloudflare tunnel vscode 端口转发 WireGuard frp https://github.com/fatedier/frp 免费域...</description>
      <category>工具</category>
      <pubDate>Tue, 02 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>serveo</h2>
<p>ssh -R 80:localhost:3000 serveo.net</p>
<h2>ngrok</h2>
<h3>启动时需要验证</h3>
<p>ngrok http 3000</p>
<h2>localtunnel</h2>
<h3>访问时需要验证</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">快速开始</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> localtunnel</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --subdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> cizai</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 3000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">全局安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> localtunnel</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">lt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> 3000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">自定义个性前缀</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">lt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --subdomain</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">个性前</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">缀</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --port</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">要映射的端</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">口</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic"># 获取访问密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -q</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> https://loca.lt/mytunnelpassword</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>cloudflare tunnel</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">登录到cloudflare.com，点击Zero</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> Trust,</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">选择Network</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> Tunnels，点击Create</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> Tunnel，Cloudflared和WARP选择Cloudflared，填入一个tunnel名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">点击保存后，选择</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> 方式部署，在本地执行以下命令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> cloudflared</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --restart=unless-stopped</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> cloudflare/cloudflared:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> tunnel</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --no-autoupdate</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66"> --token</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379">toke</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF">查看Connectors页面是否有刚才创建的Tunnel，接着点击下一步，填入子域名和要映射的本地端口，点击创建Tunnel，等待几分钟后，就可以通过子域名访问本地</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>vscode 端口转发</h2>
<h2>WireGuard</h2>
<h2>frp</h2>
<p>https://github.com/fatedier/frp</p>
<h2>免费域名</h2>
<p>https://iyideng.net/welfare/best-free-domain-name-registration-platform.html</p>
]]></content:encoded>
    </item>
    <item>
      <title>关于本站</title>
      <link>https://blog.cizai.io/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99.html</link>
      <guid>https://blog.cizai.io/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99.html</guid>
      <source url="https://blog.cizai.io/rss.xml">关于本站</source>
      <description>关于本站 一个全栈开发者，从事大数据开发。 本站桌面端安装包，支持windows，linux，mac。下载地址 Loading...</description>
      <pubDate>Sun, 17 Mar 2024 17:45:45 GMT</pubDate>
      <content:encoded><![CDATA[
<p>一个全栈开发者，从事大数据开发。</p>
<p>本站桌面端安装包，支持windows，linux，mac。<a href="https://file.cizai.io/wooapp.json" target="_blank" rel="noopener noreferrer">下载地址</a></p>
<div id="dynamic-content">
  <p>Loading...</p>
</div>
]]></content:encoded>
      <enclosure url="https://blog.cizai.io/assets/images/cover3.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>站点收藏</title>
      <link>https://blog.cizai.io/%E7%AB%99%E7%82%B9%E6%94%B6%E8%97%8F.html</link>
      <guid>https://blog.cizai.io/%E7%AB%99%E7%82%B9%E6%94%B6%E8%97%8F.html</guid>
      <source url="https://blog.cizai.io/rss.xml">站点收藏</source>
      <description>站点收藏 白噪音 独立博客列表</description>
      <category>站点收藏</category>
      <pubDate>Sat, 01 Jan 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>白噪音</h2>
<p>| 简介   | 网址                      |
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>订阅说明</title>
      <link>https://blog.cizai.io/%E6%AF%8F%E6%97%A5%E6%82%A6%E8%AF%BB/</link>
      <guid>https://blog.cizai.io/%E6%AF%8F%E6%97%A5%E6%82%A6%E8%AF%BB/</guid>
      <source url="https://blog.cizai.io/rss.xml">订阅说明</source>
      <description>订阅说明 实现原理 使用ttrss.py启动订阅服务接口，使用rsshub订阅插件，将Tiny Tiny RSS地址改为订阅接口地址，即可直接订阅网站，存入rss.csv。 定时执行write2csv.py，抓取网络上的订阅地址，存入rss.csv。 定时执行write2md.py，读取rss.csv，获取今日新增文章，写入md文档，提交git，自动显...</description>
      <category>每日悦读</category>
      <pubDate>Thu, 15 Jun 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>实现原理</h2>
<p>使用ttrss.py启动订阅服务接口，使用rsshub订阅插件，将Tiny Tiny RSS地址改为订阅接口地址，即可直接订阅网站，存入rss.csv。</p>
<p>定时执行write2csv.py<span></span>，抓取网络上的订阅地址，存入rss.csv。</p>
<p>定时执行write2md.py<span></span>，读取rss.csv，获取今日新增文章，写入md文档，提交git，自动显示在每日悦读。</p>
<p>参考代码：
https://github.com/lijc210/lijc210.github.io/blob/main/write2md.py</p>
]]></content:encoded>
    </item>
    <item>
      <title>订阅说明</title>
      <link>https://blog.cizai.io/%E6%AF%8F%E6%97%A5%E6%82%A6%E8%AF%BB/%E8%AE%A2%E9%98%85%E8%AF%B4%E6%98%8E.html</link>
      <guid>https://blog.cizai.io/%E6%AF%8F%E6%97%A5%E6%82%A6%E8%AF%BB/%E8%AE%A2%E9%98%85%E8%AF%B4%E6%98%8E.html</guid>
      <source url="https://blog.cizai.io/rss.xml">订阅说明</source>
      <description>订阅说明 实现原理 使用ttrss.py启动订阅服务接口，使用rsshub订阅插件，将Tiny Tiny RSS地址改为订阅接口地址，即可直接订阅网站，存入rss.csv。 定时执行write2csv.py，抓取网络上的订阅地址，存入rss.csv。 定时执行write2md.py，读取rss.csv，获取今日新增文章，写入md文档，提交git，自动显...</description>
      <category>每日悦读</category>
      <pubDate>Thu, 15 Jun 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>实现原理</h2>
<p>使用ttrss.py启动订阅服务接口，使用rsshub订阅插件，将Tiny Tiny RSS地址改为订阅接口地址，即可直接订阅网站，存入rss.csv。</p>
<p>定时执行write2csv.py<span></span>，抓取网络上的订阅地址，存入rss.csv。</p>
<p>定时执行write2md.py<span></span>，读取rss.csv，获取今日新增文章，写入md文档，提交git，自动显示在每日悦读。</p>
<p>参考代码：
https://github.com/lijc210/lijc210.github.io/blob/main/write2md.py</p>
]]></content:encoded>
    </item>
    <item>
      <title>Impala</title>
      <link>https://blog.cizai.io/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E5%BA%93/Impala.html</link>
      <guid>https://blog.cizai.io/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E5%BA%93/Impala.html</guid>
      <source url="https://blog.cizai.io/rss.xml">Impala</source>
      <description>Impala Impala时间戳分组</description>
      <category>数据库</category>
      <pubDate>Sat, 01 Jan 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Impala时间戳分组</h2>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>select   </span></span>
<span class="line"><span>from_unixtime(cast(siyu_add_time/1000 as int) , 'yyyy-MM-dd') as sdate,</span></span>
<span class="line"><span>count(1),</span></span>
<span class="line"><span>count(if(second_id is null,1,null))</span></span>
<span class="line"><span>from users </span></span>
<span class="line"><span>-- 2023-06-14 00:00:00</span></span>
<span class="line"><span>where siyu_add_time &gt; 1686672000000</span></span>
<span class="line"><span>group by from_unixtime(cast(siyu_add_time/1000 as int) , 'yyyy-MM-dd')</span></span>
<span class="line"><span>order by from_unixtime(cast(siyu_add_time/1000 as int) , 'yyyy-MM-dd') desc</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>clickhouse</title>
      <link>https://blog.cizai.io/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E5%BA%93/clickhouse.html</link>
      <guid>https://blog.cizai.io/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E5%BA%93/clickhouse.html</guid>
      <source url="https://blog.cizai.io/rss.xml">clickhouse</source>
      <description>clickhouse clickhouse 常用命令 clickhouse表引擎 clickhouse性能优化 数据类型 建表时能用数值型或日期时间型表示的字段，就不要用字符串——全String类型在以Hive为中心的数仓建设中常见，但CK环境不应受此影响。 虽然clickhouse底层将DateTime存储为时间戳Long类型，但不建议直接存储Lon...</description>
      <category>数据库</category>
      <pubDate>Sat, 01 Jan 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>clickhouse 常用命令</h2>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>更新数据</span></span>
<span class="line"><span>ALTER table ads_sales_item_shop_di_replica ON CLUSTER ck_cluster1 update item_no='' where item_no is null;</span></span>
<span class="line"><span>ALTER table ads_sales_item_shop_di_replica ON CLUSTER ck_cluster1 update store_shop_code='' where store_shop_code is null;</span></span>
<span class="line"><span>ALTER table ads_sales_item_shop_di_replica ON CLUSTER ck_cluster1 update unify_goods_code='' where unify_goods_code is null;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>重命名表</span></span>
<span class="line"><span>RENAME TABLE table_A TO table_A_bak, table_B TO table_B_bak;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看所有表</span></span>
<span class="line"><span>select *</span></span>
<span class="line"><span>FROM system.tables t WHERE database ='ads' AND engine &lt;&gt;'Distributed' ORDER by total_rows DESC </span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>select *</span></span>
<span class="line"><span>FROM system.tables t WHERE database ='ads'</span></span>
<span class="line"><span>AND engine &lt;&gt;'Distributed'</span></span>
<span class="line"><span>and name not like '%del%'</span></span>
<span class="line"><span>and name not like '%20%'</span></span>
<span class="line"><span>ORDER by total_rows DESC</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>自动清理query_log，query_thread_log，trace_log</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER TABLE system.query_log on cluster ck_cluster1 MODIFY TTL event_date + INTERVAL 15 DAY</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER TABLE system.query_thread_log on cluster ck_cluster1 MODIFY TTL event_date + INTERVAL 15 DAY</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER TABLE system.trace_log on cluster ck_cluster1 MODIFY TTL event_date + INTERVAL 15 DAY</span></span>
<span class="line"><span></span></span>
<span class="line"><span>立即清理</span></span>
<span class="line"><span>alter table system.query_thread_log_0 drop partition '202105'</span></span>
<span class="line"><span>分区名可以用下语句查询</span></span>
<span class="line"><span>select * from system.parts p where table = '表名'</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看parts  </span></span>
<span class="line"><span>select * from system.parts  where table = 'abs_activity_item_info_day_replica'</span></span>
<span class="line"><span>select * from system.parts where active = 0</span></span>
<span class="line"><span>当前慢查询</span></span>
<span class="line"><span>SELECT * FROM system.processes limit 100</span></span>
<span class="line"><span></span></span>
<span class="line"><span>耗时大于60秒</span></span>
<span class="line"><span>kill query where elapsed &gt;= 60</span></span>
<span class="line"><span></span></span>
<span class="line"><span>clickhouse不能创建等执行操作时（每个节点都要执行）</span></span>
<span class="line"><span>select * from system.mutations where is_done = 0;</span></span>
<span class="line"><span>kill mutation ON CLUSTER ck_cluster1 </span></span>
<span class="line"><span> where database='ads' and table='ads_jd_erp_sale_outstock_replica' </span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>进入zk清理任务</span></span>
<span class="line"><span>deleteall /clickhouse/distributed_ddl/query-0000011932</span></span>
<span class="line"><span>查询阻塞的任务</span></span>
<span class="line"><span>select * from system.distributed_ddl_queue where status != 'Finished'</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看表大小</span></span>
<span class="line"><span>SELECT</span></span>
<span class="line"><span>    table AS `表名`,</span></span>
<span class="line"><span>    sum(rows) AS `总行数`,</span></span>
<span class="line"><span>    formatReadableSize(sum(data_uncompressed_bytes)) AS `原始大小`,</span></span>
<span class="line"><span>    formatReadableSize(sum(data_compressed_bytes)) AS `压缩大小`,</span></span>
<span class="line"><span>    round((sum(data_compressed_bytes) / sum(data_uncompressed_bytes)) * 100, 0) AS `压缩率`</span></span>
<span class="line"><span>FROM system.parts</span></span>
<span class="line"><span>GROUP BY table</span></span>
<span class="line"><span>order by sum(data_compressed_bytes) desc</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>修改字段名</span></span>
<span class="line"><span>ALTER TABLE visits RENAME COLUMN webBrowser TO browser</span></span>
<span class="line"><span>分布式集群下用分布式DDL修改字段名</span></span>
<span class="line"><span>ALTER TABLE visits on cluster shipin_cluster RENAME COLUMN webBrowser TO browser</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>新增字段</span></span>
<span class="line"><span> alter table ads_itemprice_sales_section_replica ON CLUSTER ck_cluster1 add column sort_mark Nullable(int)</span></span>
<span class="line"><span> alter table ads_itemprice_sales_section ON CLUSTER ck_cluster1 add column sort_mark Nullable(int)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>clickhouse表引擎</h2>
<p>| 系列        | 引擎                         | 特点                                                                                                                                                                                                                                    | 场景                                                                                     |
|</p>
]]></content:encoded>
    </item>
  </channel>
</rss>